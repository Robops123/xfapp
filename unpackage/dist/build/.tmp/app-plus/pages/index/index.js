(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/index/index"],{"0036":function(e,t,n){"use strict";var i=n("7fbc"),a=n.n(i);a.a},1123:function(e,t,n){"use strict";n.r(t);var i=n("aa86"),a=n.n(i);for(var s in i)"default"!==s&&function(e){n.d(t,e,function(){return i[e]})}(s);t["default"]=a.a},"7fbc":function(e,t,n){},aa86:function(e,t,n){"use strict";(function(e,i){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=l(n("a34a")),s=l(n("2439")),o=l(n("f40e")),c=l(n("d429")),r=n("bb60");function l(e){return e&&e.__esModule?e:{default:e}}function u(e,t,n,i,a,s,o){try{var c=e[s](o),r=c.value}catch(l){return void n(l)}c.done?t(r):Promise.resolve(r).then(i,a)}function d(e){return function(){var t=this,n=arguments;return new Promise(function(i,a){var s=e.apply(t,n);function o(e){u(s,i,a,o,c,"next",e)}function c(e){u(s,i,a,o,c,"throw",e)}o(void 0)})}}var f=function(){return n.e("components/zy-grid/zy-grid").then(n.bind(null,"37b9"))},p=function(){return n.e("components/u-charts/u-charts").then(n.bind(null,"4118"))},g={mixins:[r.Common],components:{zyGrid:f,uCharts:p},data:function(){return{canvas:!0,cWidth:"",cHeight:"",arr:[],page1:1,limit1:10,warnList:[],warnListTotal:1,page2:1,limit2:10,total:0,loading:!1,percent:0,loaded:0}},onLoad:function(e){this.getVersion()},methods:{canIUseDatabase:function(){},progressListener:function(){var t=this;e.$on("resourceAdd",function(){t.loading=!0,t.loaded++,t.percent=parseInt(t.loaded/t.total*100),100==t.percent&&(console.log(i("读完了"," at pages\\index\\index.vue:136")),t.loading=!1),e.$off("resourceAdd",function(){t.progressListener()})})},find:function(){this.test("4")},cleardb:function(){var e=plus.sqlite.isOpenDatabase({name:"first",path:"_doc/test.db"});console.log(i(e," at pages\\index\\index.vue:150")),e?plus.sqlite.executeSql({name:"first",sql:"DROP TABLE fp_inspection_item",success:function(e){console.log(i("删除成功"," at pages\\index\\index.vue:206")),plus.sqlite.executeSql({name:"first",sql:"DROP TABLE fp_inspectionPoint_Item",success:function(e){console.log(i("删除成功"," at pages\\index\\index.vue:211")),plus.sqlite.executeSql({name:"first",sql:"DROP TABLE fp_inspection_point",success:function(e){console.log(i("删除成功"," at pages\\index\\index.vue:216")),plus.sqlite.executeSql({name:"first",sql:"DROP TABLE fp_trouble_record;",success:function(e){console.log(i("删除成功"," at pages\\index\\index.vue:221"))},fail:function(e){console.log(i("executeSql failed: "+JSON.stringify(e)," at pages\\index\\index.vue:224"))}})},fail:function(e){console.log(i("executeSql failed: "+JSON.stringify(e)," at pages\\index\\index.vue:229"))}})},fail:function(e){console.log(i("executeSql failed: "+JSON.stringify(e)," at pages\\index\\index.vue:234"))}})},fail:function(e){console.log(i("executeSql failed: "+JSON.stringify(e)," at pages\\index\\index.vue:239"))}}):plus.sqlite.openDatabase({name:"first",path:"_doc/test.db",success:function(e){plus.sqlite.executeSql({name:"first",sql:"DROP TABLE fp_inspection_item",success:function(e){console.log(i("删除成功"," at pages\\index\\index.vue:160")),plus.sqlite.executeSql({name:"first",sql:"DROP TABLE fp_inspectionPoint_Item",success:function(e){console.log(i("删除成功"," at pages\\index\\index.vue:165")),plus.sqlite.executeSql({name:"first",sql:"DROP TABLE fp_inspection_point",success:function(e){console.log(i("删除成功"," at pages\\index\\index.vue:170")),plus.sqlite.executeSql({name:"first",sql:"DROP TABLE fp_trouble_record;",success:function(e){console.log(i("删除成功"," at pages\\index\\index.vue:175"))},fail:function(e){console.log(i("executeSql failed: "+JSON.stringify(e)," at pages\\index\\index.vue:178"))}})},fail:function(e){console.log(i("executeSql failed: "+JSON.stringify(e)," at pages\\index\\index.vue:183"))}})},fail:function(e){console.log(i("executeSql failed: "+JSON.stringify(e)," at pages\\index\\index.vue:188"))}})},fail:function(e){console.log(i("executeSql failed: "+JSON.stringify(e)," at pages\\index\\index.vue:193"))}})},fail:function(e){console.log(i("openDatabase failed: "+JSON.stringify(e)," at pages\\index\\index.vue:198"))}})},init:function(){this.cWidth=e.upx2px(750),this.cHeight=e.upx2px(400),this.getServerData()},getVersion:function(){var t=this,n=this,a={tenantId:e.getStorageSync("tenantId")};c.default.showLoading(),o.default.apiGet("/inspectionPointApp/edition",a).then(function(a){200==a.code?a.data!=e.getStorageSync("version")?(e.setStorageSync("version",a.data),t.getList()):(c.default.hideLoading(),n.checkOpen(),console.log(i("版本相同"," at pages\\index\\index.vue:264"))):c.default.showToast("版本号获取失败")}).catch(function(e){c.default.showToast(e)})},getList:function(){var t=this,n={tenantId:e.getStorageSync("tenantId")};o.default.apiGet("/inspectionPointApp/allBaseData",n).then(function(n){200==n.code?(t.total=n.data.pointItems.length+n.data.items.length+n.data.points.length,t.progressListener(),t.openDB(n.data.points,n.data.items,n.data.pointItems),c.default.hideLoading()):(e.setStorageSync("version",null),c.default.hideLoading(),c.default.showToast("获取巡检点列表失败"))}).catch(function(e){console.log(i(e," at pages\\index\\index.vue:294")),c.default.hideLoading(),c.default.showToast(JSON.stringify(e))})},getDevList:function(){var t={tenantId:e.getStorageSync("tenantId")};o.default.apiGet("/check/deviceList",t).then(function(t){if(200==t.code){var n=[];e.setStorageSync("devListAll",t.data),t.data.forEach(function(e){n.push(e.devName)}),e.setStorageSync("devList",n)}else c.default.showToast("无法获取设备")}).catch(function(e){c.default.hideLoading(),c.default.showToast("请检查网络")})},getWarnList:function(){var t=this,n={tenantId:e.getStorageSync("tenantId"),current:this.page1,size:this.limit1};c.default.showLoading(),o.default.apiGet("/device/warnLog",n).then(function(e){200==e.code?(0==t.warnList.length?t.warnList=e.data.records:t.warnList=t.warnList.concat(e.data.records),t.warnListTotal=e.data.total):c.default.showToast("无法获取告警列表"),c.default.hideLoading()}).catch(function(e){c.default.hideLoading(),c.default.showToast("请检查网络")})},scrolltolower1:function(){console.log(i(this.warnList.length," at pages\\index\\index.vue:350")),this.warnList.length<this.warnListTotal&&(this.page1++,this.getWarnList())},change:function(e,t,n){this.$refs[this.arr[e].id][0].changeData(this.arr[e].id,this.arr[e].opts,t,n)},findFamilyQYByList:function(){var e=d(a.default.mark(function e(){var t,n,i,s;return a.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t={loading:!0,url:this.HostURL+this.serviceSRV,data:{p_service:"familySjService",p_method:"findFamilyQYByTotalList",startTime:this.startTime,endTime:this.endTime,regcodes:this.divisionCode[0],pageNo:1,pageSize:10,token:this.token}},e.next=3,this.$api.get(t);case 3:n=e.sent,i=this.$api.ErrTip(n),i&&i.list&&(s={type:"column",categories:[],series:[{name:"户数",data:[]}]},i.list.forEach(function(e){e.name&&e.cnt&&(s.categories.push(e.name),s.series[0].data.push(e.cnt))}),this.$refs[this.arr[2].id][0].changeData(this.arr[2].id,s,"column","group"));case 6:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),getServerData:function(){var e=d(a.default.mark(function e(){var t,n,i,o,c,r;return a.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:t=s.default.getSampleData(),n={enableScroll:!1},n.categories=t.LineA.categories,n.series=t.LineA.series,i={rotate:!1,enableScroll:!1},i.categories=t.LineB.categories,i.series=t.LineB.series,o={enableScroll:!1},o.categories=t.ColumnB.categories,o.series=t.ColumnB.series,c={enableScroll:!1,unit:""},c.categories=t.ColumnMeter.categories,c.series=t.ColumnMeter.series,r=[{group:"工单执行情况分析",title:"工单月度执行情况分析",btn:[{title:"折线图",type:"line",etype:"straight"},{title:"柱状图",type:"column",etype:"group"},{title:"区域图",type:"area",etype:"curve"}],opts:n,chartType:"line",extraType:"default",id:"c0"},{title:"工单月度执行情况分析",btn:[{title:"折线图",type:"line",etype:"straight"},{title:"柱状图",type:"column",etype:"group"},{title:"区域图",type:"area",etype:"curve"}],opts:o,chartType:"column",extraType:"group",id:"c1"},{group:"故障上报情况分析",title:"故障上报月度情况分析",opts:c,chartType:"column",extraType:"meter",id:"c2"},{title:"隐患上报月度情况分析",opts:i,chartType:"line",extraType:"curve",id:"c3"},{group:"巡检记录情况分析",title:"巡检记录月度情况分析",btn:[{title:"饼状图",type:"pie"},{title:"圆环图",type:"ring"}],opts:t.Pie,chartType:"pie",id:"c5"}],this.arr=r;case 15:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),onNavigationBarButtonTap:function(t){var n=t.index;0===n&&e.navigateTo({url:"/pages/login/login"})}}};t.default=g}).call(this,n("6e42")["default"],n("0de9")["default"])},bc7c:function(e,t,n){"use strict";n.r(t);var i=n("c3f2"),a=n("1123");for(var s in a)"default"!==s&&function(e){n.d(t,e,function(){return a[e]})}(s);n("0036");var o,c=n("f0c5"),r=Object(c["a"])(a["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],o);t["default"]=r.exports},c3f2:function(e,t,n){"use strict";var i,a=function(){var e=this,t=e.$createElement;e._self._c},s=[];n.d(t,"b",function(){return a}),n.d(t,"c",function(){return s}),n.d(t,"a",function(){return i})},ec14:function(e,t,n){"use strict";(function(e){n("d53d"),n("921b");i(n("66fd"));var t=i(n("bc7c"));function i(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,n("6e42")["createPage"])}},[["ec14","common/runtime","common/vendor"]]]);